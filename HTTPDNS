请求一般流程:

输入URL 会请求dns服务器得到相应的ip,通过ip找到相应的服务器,建立tcp连接,等客户端发送http请求包后,服务器收到包后开始处理请求包,服务器调用自身服务,返回响应包,客户端得到响应包开始渲染这个响应包的主体body,等收到全部的内容后断开与服务器之间的tcp连接.

DNS工作原理:
(域名系统)
1,输入url后操作系统首先会开始检查自己本地的host文件是否有这个网址的映射关系,如果有那就先调用这个ip地址映射,完成域名解析
2,如果host没有这个域名 ,那么会查找本地dns解析器缓存,如果有关系映射,直接返回,完成域名解析
3,如果host和本地dns解析器缓存都没有,会找tcp/ip参数中设置的首选dns服务器,可以叫做本地dns服务器,此服务器收到查询时,如果该域名在本地配置资源中,完成解析返回给客户端,此解析具有权威性.
4,如果该URL 不由本地dns解析,但是该服务器已经缓存了该URL的映射,则调用该ip地址映射,完成解析,此解析不具有权威性.
5,如果本地dns本地区域文件和缓存都失效,则根据本地dns服务器设置(是否设置转发器)来进行查询,
	如果未用转发模式,本地dns会把请求发送到更dns服务器,跟dns服务器会判断这个域名(.com)由谁来授权管理,并会返回一个负责该顶级域名服务器的ip,本地dns收到后会连接负责.com域名的这台服务器,
	如果这台服务器收到后无法解析,会找一个管理.com域下的下一级dns服务器地址(qq.com)返回给本地dns服务器,本地dns服务器收到后会去请求qq.com重复上面的流程,直到找到www.qq.com

	如果启用转发模式,此dns服务器会将该请求转发到上一级dns服务器,有上一级服务器进行解析,如果他也不能解析,或找根服务器或上上级服务器,依次循环,不管是转发还是根服务器都会把结果返回给本地dns服务器,由此dns服务器返回给客户机.

HTTP协议:
定义:
超文本传输协议,基于TCP/IP应用层传输协议的基础上,不涉及数据包的传输,主要规定了客户端和服务端的传输格式,默认使用80端口.
流程:
当客户端 向服务器发出请求时,会通过 tcp建立连接通道,然后会向服务器发送http请求包,服务器会向客户端返回http应答包,如果请求的资源包含动态语言的内容,那么服务器会调用动态语言的解释引擎负责处理动态内容,并将处理得到的内容返回给客户端.请求完成后会,http会主动断开tcp连接,完成一次请求.
注意:
客户端通过建立一个连接与发送一个http请求发起一个事物,服务器不能主动联系客户端,也不能给客户端发送一个回调连接,客户端和服务端都可以主动断开连接.所以http是短连接,无状态连接.

http的request请求包:

包含3部分,请求行,请求头,主体. 头和主体之间有个空行.
请求行一般格式 :请求方法 请求url http协议/协议版本 
请求头一般格式:每个头单独一行,一般有  host,user-agent,accept,accept-encoding,accept-charset等
空一行
主体:请求的资源参数,比如post传递的参数

请求方法:get post delete put options,head,connect,trace等.
get与post 的区别:
get的请求体为空,post带有具体的参数
get的参数放在url上用?拼接,多个参数使用&符号连接,post把请求的参数方法主体内
get传送的参数有大小限制,因为浏览器会url的长度有限制,post的没有限制
get传送参数没有post的安全.

http的response响应包:

包含3部分 状态行,响应头,数据

状态行:协议版本号,状态码,消息描述,状态码(1xx,2xx,3xx,4xx,5xx)
		1xx请求已接收,需要请求着继续执行.
		2xx请求被成功接受并处理. 
			200成功
		3xx重定向,需要进一步的操作完成请求.
			301永久重定向
			302暂时跳转
		4xx客户端错误,请求包含语法错误,或请求无法实现.
			404服务器无法根据请求找到资源
			405请求的方法被禁止
			408服务器等待客户端发送的请求时间太长超时
		5xx服务器错误,处理请求中出现错误,未能完成请求.
			500服务器内部错误无法完成请求
			501服务器不支持请求功能
			502网关或代理服务器错误
			504网关或代理服务器请求超时
			505服务器不支持请求的http协议版本
响应头:一般包含 server,content-type,content-encoding,content-length,cookie,connection,date,expires,last-modified.

http无状态和connection:keep-alive 区别
		无状态是指http协议对于事物处理没有记忆能力,服务器不是客户端现在是什么状态,也就是说现在打开的页面和你前面打开的页面没有任何关系.
		从1.1开始http默认connection:keep-alive开启,简单来说就是客户端和服务端用于传输http数据的tcp连接不会关闭,如果客户端再次访问该服务器会继续使用该tcp连接,不需要重新建立连接,避免了重新建立连接的三次握手请求带来的损耗.
		keep-alive不是永久连接的,他有一个保持时间,可以在不同的服务器中配置.
		应为 1.1版本 会有对头堵塞的问题,所以一般为了避免这个问题,可以有两种方法,1,减少请求数,2,同时开启更多的持久连接,所以可以通过将css,js等资源合并请求,域名分片来提供响应速度.
		2.0 头信息和数据体都是二进制,并且统称为帧,头信息帧,数据体帧,避免了对头堵塞,推送等





